#### **2.4 机器人运动学建模**



运动学是研究机器人几何位置关系和运动关系的科学，是机器人路径规划和运动控制的基础。它包含正运动学和逆运动学两部分。



##### **2.4.1 D-H参数模型建立**



为了用数学语言精确描述机器人各连杆之间的几何关系，本设计采用标准D-H（Denavit-Hartenberg）法为其建立数学模型。首先，根据D-H建模规则，在机器人基座和每个关节上依次建立连杆坐标系{0}到{6}，如图2-3所示。

**[图2-3 机器人连杆坐标系建立示意图（请在此处插入D-H坐标系图）]**

根据所建立的坐标系，可以得到本设计六轴机器人的D-H参数表，如表2-2所示。

表2-2 机器人D-H参数表

| 关节i | 连杆扭角 alpha_i−1 (rad) | 连杆长度 a_i−1 (mm) | 连杆偏距 d_i (mm) | 关节转角 theta_i (rad) |

| :---: | :---: | :---: | :---: | :---: |

| 1 | 0 | 0 | d_1 | theta_1∗ |

| 2 | pi/2 | 0 | 0 | theta_2∗ |

| 3 | 0 | a_2 | 0 | theta_3∗ |

| 4 | pi/2 | a_3 | d_4 | theta_4∗ |

| 5 | −pi/2 | 0 | 0 | theta_5∗ |

| 6 | pi/2 | 0 | d_6 | theta_6∗ |

注：$\theta_i^$为关节变量。根据设计，d_1=150, a_2=450, a_3=50, d_4=400, d_6=80 (单位: mm)。*



##### **2.4.2 正运动学分析**



正运动学解决的是：给定机器人所有关节的角度，计算其末端执行器在基座坐标系中的位置和姿态。根据D-H参数，连杆i坐标系相对于连杆i-1坐标系的齐次变换矩阵$^{i-1}T_i$为：

$$^{i-1}T_i = \begin{bmatrix} \cos\theta_i & -\sin\theta_i\cos\alpha_{i-1} & \sin\theta_i\sin\alpha_{i-1} & a_{i-1}\cos\theta_i \\ \sin\theta_i & \cos\theta_i\cos\alpha_{i-1} & -\cos\theta_i\sin\alpha_{i-1} & a_{i-1}\sin\theta_i \\ 0 & \sin\alpha_{i-1} & \cos\alpha_{i-1} & d_i \\ 0 & 0 & 0 & 1 \end{bmatrix} $$通过将从基座到末端的6个变换矩阵依次相乘，即可得到机器人末端相对于基座的总变换矩阵，即正运动学方程：$$ ^0T_6 = ^0T_1(\theta_1) \cdot ^1T_2(\theta_2) \cdot ^2T_3(\theta_3) \cdot ^3T_4(\theta_4) \cdot ^4T_5(\theta_5) \cdot ^5T_6(\theta_6) $$其中，$$ ^0T_6 = \begin{bmatrix} n_x & o_x & a_x & p_x \\ n_y & o_y & a_y & p_y \\ n_z & o_z & a_z & p_z \\ 0 & 0 & 0 & 1 \end{bmatrix} $$矩阵的右下角$3 \\times 1$列向量$[p\_x, p\_y, p\_z]^T$表示末端的位置，左上角$3 \\times 3$的旋转矩阵$[n, o, a]$表示末端的姿态。 ##### **2.4.3 逆运动学分析** 逆运动学解决的是：给定末端执行器期望的位置和姿态（即一个已知的$^0T\_6$矩阵），反求出机器人所有关节应处于的角度。这是机器人轨迹规划和控制的核心。对于本设计这种具有球腕结构的机器人，其逆运动学存在解析解，通常采用**运动学解耦法**求解： 1.  **求解腕部中心位置**：首先，根据末端位姿求出腕部中心点$P\_c$在基座坐标系下的坐标。腕部中心点$P\_c$是关节4、5、6轴线的交点。其位置可以通过从末端点$P$沿着末端坐标系的z轴（即$a$向量）后退$d\_6$的距离得到： $$

```
$$P\_c = P - d\_6 \\cdot a

$$
$$
```

1. **求解前三轴关节角 (theta_1,theta_2,theta_3)**：现在问题转化为一个三自由度的平面连杆定位问题。利用P_c的坐标$(P_{cx}, P_{cy}, P_{cz})$，通过几何关系求解前三个关节角。

   - 从俯视图看，可以轻易得到$\theta_1$：

     $$$$$$\\theta\_1 = \\text{atan2}(P\_{cy}, P\_{cx})$$

     $$$$

     

   - 然后，在由关节1决定的垂直平面内，利用余弦定理求解$\theta_3$。

   - 最后，利用几何关系求解$\theta_2$。

   - 由于对称性，这个步骤通常会得到两组解（对应于“肘关节向上”和“肘关节向下”两种姿态）。

2. **求解后三轴关节角 (theta_4,theta_5,theta_6)**：在求出前三轴关节角后，就可以计算出腕部坐标系{3}相对于基座坐标系{0}的变换矩阵$^0T_3$。那么，末端坐标系{6}相对于腕部坐标系{3}的姿态就可以表示为：

   $$$$$$^3R\_6 = ({^0R\_3})^{-1} \\cdot ^0R\_6 $$

   $$$$其中$^0R_3和^0R_6分别是^0T_3和^0T_6中的旋转矩阵。通过将计算出的^3R_6矩阵与由\theta_4, \theta_5, \theta_6$表示的理论腕部旋转矩阵进行元素比较，即可通过反解三角函数求出后三个关节角。

由于三角函数的周期性和多值性，整个逆解过程通常会得到8组不同的关节角组合。在实际应用中，控制器会根据特定准则（如选择离当前关节位置最近的解、避免关节限位等）从中选择一组最优解。